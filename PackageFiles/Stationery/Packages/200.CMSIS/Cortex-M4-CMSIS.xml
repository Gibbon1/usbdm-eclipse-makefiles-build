<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE root SYSTEM "../package.dtd">

<root version="1.0">
   <!-- Cortex-M4 CMSIS RTOS -->
   <projectActionList id="Cortex-M4-CMSIS" >
      <applyWhen>
         <deviceFamilyIs>CortexM4</deviceFamilyIs>
      </applyWhen>
      <variable id="CMSIS-M4-rtos" name="CMSIS RTOS framework" description="Adds CMSIS-RTOS framework for Cortex M4" />
      <condition variable="CMSIS-M4-rtos">
         <createFolder target="cmsis" type="include" />
         <copy source="../cmsis/Doc/index.html" target="CMSIS.html" type="link" />
         <copy source="../cmsis/INC" target="cmsis/INC" />
         <copy source="../cmsis/SRC" target="cmsis/SRC" />
         <copy source="../cmsis/GCC/SVC_Table.S" target="cmsis/GCC/SVC_Table.S" />
         <copy source="../cmsis/GCC/HAL_CM4.S" target="cmsis/GCC/HAL_CM4.S" />
         <copy source="Sources/RTX_Conf_CM.c" target="Sources/RTX_Conf_CM.c" />
         <copy source="Sources/RTX_Main.c" target="Sources/main.c" replace="true" />
         <projectOption id="net.sourceforge.usbdm.gnu.c.compiler.option.include.paths">
            <value>&quot;${ProjDirPath}/cmsis/INC&quot;</value>
            <value>&quot;${ProjDirPath}/cmsis/SRC&quot;</value>
         </projectOption>
         <projectOption id="net.sourceforge.usbdm.gnu.cpp.compiler.option.include.paths">
            <value>&quot;${ProjDirPath}/cmsis/INC&quot;</value>
            <value>&quot;${ProjDirPath}/cmsis/SRC&quot;</value>
         </projectOption>
         <projectOption id="net.sourceforge.usbdm.gnu.cpp.compiler.option.preprocessor.def.symbols">
            <value>__CORTEX_M4</value>
            <value>__CMSIS_RTOS</value>
         </projectOption>
         <projectOption id="net.sourceforge.usbdm.gnu.c.compiler.option.preprocessor.def.symbols">
            <value>__CORTEX_M4</value>
            <value>__CMSIS_RTOS</value>
         </projectOption>
      </condition>
   </projectActionList>

</root>